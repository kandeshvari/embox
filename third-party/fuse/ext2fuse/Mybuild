package third_party.ext2fuse

@Build(stage=1,script="$(EXTERNAL_MAKE)")
@BuildArtifactPath(cppflags="-I$(abspath $(EXTERNAL_BUILD_DIR))/third_party/ext2fuse/core/install/src")
@BuildDepends(third_party.fuse.core)
@BuildDepends(third_party.e2fsprogs.core)
static module core {
	@AddPrefix("^BUILD/extbld/^MOD_PATH/../core/install/src")
	source "*.o"

	source "ext2fuse.c"
	
	depends embox.compat.posix.fs.statvfs
	@NoRuntime depends third_party.e2fsprogs.core
}

@App
@AutoCmd
@Cmd(name = "ext2fuse",
	help = "report filesystem free-space fragmentation",
	man = '''
		NAME
			ext2fuxe - report filesystem free-space fragmentation
	''')
module ext2fuse {
	source "ext2fuse.c"

	@NoRuntime depends core
}

